/* iOS Safari optimizations for better performance */

/* Mobile-only iOS Safari optimizations */
@supports (-webkit-overflow-scrolling: touch) {
  @media (max-width: 1024px) {
    /* Simplified carousel animation - slower and smoother for mobile */
    .mockups-carousel__column-inner {
      animation-duration: 60s !important; /* Much slower */
      animation-timing-function: linear !important;
      animation-iteration-count: infinite !important;
      will-change: transform !important;
      backface-visibility: hidden !important;
      transform: translateZ(0) !important; /* Force hardware acceleration */
    }

    /* Optimize carousel structure for mobile */
    .mockups-carousel__container {
      width: 120% !important; /* Smaller width for better performance */
    }

    .mockups-carousel__mockup {
      max-width: 300px !important; /* Smaller images for better performance */
    }

    /* Simplified credit card animations for mobile */
    .how-it-works__single-img #card-left,
    .how-it-works__single-img #card-right {
      animation: none !important;
      transition: transform 0.4s ease !important;
      will-change: transform !important;
      filter: none !important; /* Remove expensive filters */
    }

    .how-it-works__feature--animate .how-it-works__single-img #card-left {
      transform: translateX(-15px) translateY(6px) rotate(-2deg) scale(0.99) !important;
    }

    .how-it-works__feature--animate .how-it-works__single-img #card-right {
      transform: translateX(15px) translateY(-6px) rotate(2deg) scale(0.99) !important;
    }

    /* Simplify hover effects on mobile for better touch performance */
    .currency-slider__icon:hover,
    .currency-slider__icon:active {
      transform: none !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06) !important;
    }

    /* Optimize rendering for iOS Safari mobile */
    .how-it-works__mockup-img,
    .how-it-works__single-img,
    .currency-slider__track {
      transform: translateZ(0);
      -webkit-transform: translateZ(0);
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }

    /* Reduce paint complexity on mobile */
    .mockups-carousel__column-inner {
      will-change: transform;
      contain: layout style paint;
    }
  }
}

/* iOS 12 and older compatibility fixes */
@supports (not (backdrop-filter: blur())) {
  .how-it-works__single-img #card-left,
  .how-it-works__single-img #card-right {
    animation: none !important;
    transition: transform 0.1s ease !important;
  }

  /* Disable backdrop blur fallbacks only for very old iOS */
  .header.scrolled {
    background-color: rgba(242, 242, 242, 0.95) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  [data-theme="dark"] .header.scrolled {
    background-color: rgba(26, 26, 26, 0.95) !important;
  }
}